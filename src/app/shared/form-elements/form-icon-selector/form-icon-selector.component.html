<GridLayout rows="auto,30,auto"
    columns="*,*" class="form-icon-selector">

    <!-- Icon display -->
    <StackLayout class="group-wrapper"
        row="0" col="0"
        colSpan="3"
        width="100%">

        <FlexboxLayout class="form-icon-wrapper"
            [style.background]="icon.background">

            <Label *ngIf="icon && !spinner"
                class="collection-icon"
                [ngClass]="icon?.name?.substr(0, icon.name.indexOf(' '))"
                [style.color]="icon?.color"
                [text]="icon?.name?.substr(icon?.name?.indexOf(' ')+1, icon?.name?.length) | fonticon"></Label>

            <ActivityIndicator
                *ngIf="spinner"
                busy="true"
                class="spinner-small">
            </ActivityIndicator>

        </FlexboxLayout>
    </StackLayout>

    <!-- Set selectors -->
    <StackLayout row="0"
        class="group-wrapper"
        col="0" orientation="vertical"
        horizontalAlignment="left"
        verticalAlignment="top">

        <FlexboxLayout *ngFor="let iSet of iconSets; let i=index"
            (tap)="changeIconSet(i)"
            class="radio-button-wrapper">

            <Label class="fa radio-button"
                [text]="(iconSet===i ? 'fa-dot-circle' : 'fa-circle') | fonticon"></Label>
            <Label [text]="('form-icon-selector.' + iSet) | translate"></Label>
        </FlexboxLayout>

    </StackLayout>

    <!-- Color selectors -->
    <FlexboxLayout class="group-wrapper"
        flexDirection="column"
        alignItems="flex-end"
        justifyContent="flex-end"
        row="0" col="1">

        <StackLayout (tap)="selectColor(0)"
            class="color-selector"
            marginBottom="10"
            [style.background]="icon.color"></StackLayout>

        <StackLayout (tap)="selectColor(1)"
            class="color-selector"
            [style.background]="icon.background"></StackLayout>
    </FlexboxLayout>

    <!-- Current icon name & Search -->
    <FlexboxLayout row="1"
        col="0" colSpan="3"
        flexDirection="row"
        justifyContent="space-between"
        alignItems="flex-end">

        <Label class="small-label"
            (tap)="scrollRight()"
            [text]="icon?.name?.substr(icon?.name?.indexOf(' fa-')+4, icon?.name?.length)">
        </Label>

        <StackLayout (tap)="searchIcon()"
            orientation="horizontal"
            verticalAlignment="center">
            <Label class="fa radio-button"
                [class.active]="!!searchString"
                [text]="'fa-search' | fonticon"></Label>
            <Label class="small-label"
                [class.active]="!!searchString"
                [text]="searchString || ('form-icon-selector.search' | translate)"></Label>
        </StackLayout>

    </FlexboxLayout>

    <!-- Scrolling selector -->
    <ScrollView orientation="horizontal"
        row="2" col="0"
        colSpan="3"
        #scrollView
        class="scroller-wrapper">

        <!-- Never use a StackLayout directly within a ScrollView! -->
        <FlexboxLayout *ngIf="!!icons.length"
            padding="5"
            flexDirection="row"
            alignItems="center"
            justifyContent="flex-start"
            width="auto">

            <FlexboxLayout *ngFor="let i of icons"
                (tap)="icon.name = i; onChange(icon);"
                class="scroller-icon-wrapper"
                [class.selected]="i === icon.name">

                <Label [ngClass]="i.substr(0, i.indexOf(' '))"
                    [text]="i.substr(i.indexOf(' ')+1, i.length) | fonticon"></Label>
            </FlexboxLayout>

        </FlexboxLayout>

    </ScrollView>

</GridLayout>
